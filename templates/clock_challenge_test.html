<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clock Challenge - UI Test Page</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #1e1b4b;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #6b7280;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 25px;
            padding: 20px;
            background: #f3f4f6;
            border-radius: 12px;
        }
        .test-section h3 {
            color: #374151;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .btn-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .btn-purple { background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; }
        .btn-gold { background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #1e1b4b; }
        .btn-green { background: linear-gradient(135deg, #22c55e, #16a34a); color: white; }
        .btn-orange { background: linear-gradient(135deg, #f97316, #ea580c); color: white; }
        .btn-red { background: linear-gradient(135deg, #ef4444, #dc2626); color: white; }
        .btn-blue { background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; }
        
        /* Timer Demo Area */
        #timerDemo {
            display: none;
            background: linear-gradient(135deg, #1e1b4b, #312e81);
            padding: 15px 20px;
            border-radius: 12px;
            color: white;
            margin-top: 15px;
        }
        #timerDemo .timer-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        #timerDemo .timer-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        #timerDemo .timer-time {
            font-weight: 700;
            font-size: 1.3rem;
        }
        #timerDemo .timer-label {
            font-size: 0.85rem;
            color: #fbbf24;
            font-weight: 600;
        }
        #timerDemo .timer-bar-bg {
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
        }
        #timerDemo .timer-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #22c55e, #4ade80);
            width: 100%;
            transition: width 0.3s, background 0.3s;
            border-radius: 4px;
        }
        .timer-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .timer-controls button {
            flex: 1;
            padding: 10px;
            font-size: 13px;
        }

        /* Clock Challenge Animations */
        @keyframes clockModalPop {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes clockSuccessPop {
            0% { transform: scale(0.5) rotate(-5deg); opacity: 0; }
            50% { transform: scale(1.05) rotate(2deg); }
            100% { transform: scale(1) rotate(0); opacity: 1; }
        }
        @keyframes clockPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        @keyframes clockBounce {
            0% { transform: translateY(-30px); opacity: 0; }
            50% { transform: translateY(10px); }
            100% { transform: translateY(0); opacity: 1; }
        }
        @keyframes clockFlash {
            0%, 100% { background: linear-gradient(135deg, #1e1b4b, #312e81); }
            50% { background: linear-gradient(135deg, #7f1d1d, #991b1b); }
        }
        @keyframes penaltyPop {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            30% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0.8) translateY(-50px); opacity: 0; }
        }

        .note {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 12px 15px;
            border-radius: 0 8px 8px 0;
            margin-top: 20px;
            font-size: 14px;
            color: #92400e;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚è±Ô∏è Clock Challenge</h1>
        <p class="subtitle">UI Test Page - Safe to experiment!</p>

        <!-- Modals Section -->
        <div class="test-section">
            <h3>üìã Modals</h3>
            <div class="btn-row">
                <button class="btn-purple" onclick="showIntroModal()">üéâ Intro Modal (L6 first time)</button>
                <button class="btn-gold" onclick="showOptInModal(6)">‚è±Ô∏è Opt-In L6</button>
                <button class="btn-gold" onclick="showOptInModal(8)">‚è±Ô∏è Opt-In L8</button>
                <button class="btn-gold" onclick="showOptInModal(10)">‚è±Ô∏è Opt-In L10</button>
            </div>
        </div>

        <!-- Timer Section -->
        <div class="test-section">
            <h3>‚è±Ô∏è Timer Bar</h3>
            <div class="btn-row">
                <button class="btn-blue" onclick="startTimer(30)">Start 30s Timer</button>
                <button class="btn-blue" onclick="startTimer(120)">Start 2min Timer</button>
            </div>
            <div id="timerDemo">
                <div class="timer-header">
                    <div class="timer-left">
                        <span id="timerEmoji" style="font-size: 1.5rem;">‚è±Ô∏è</span>
                        <span class="timer-time" id="timerDisplay">0:00</span>
                    </div>
                    <span class="timer-label">‚ö° CLOCK MODE</span>
                </div>
                <div class="timer-bar-bg">
                    <div class="timer-bar-fill" id="timerBar"></div>
                </div>
                <div class="timer-controls">
                    <button class="btn-red" onclick="applyPenalty()">‚ùå Wrong (-15s)</button>
                    <button class="btn-purple" onclick="stopTimer()">‚èπÔ∏è Stop</button>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div class="test-section">
            <h3>üèÜ Result Screens</h3>
            <div class="btn-row">
                <button class="btn-gold" onclick="showSuccess('lightning')">‚ö° Lightning (+50)</button>
                <button class="btn-orange" onclick="showSuccess('fast')">üî• Fast (+35)</button>
                <button class="btn-green" onclick="showSuccess('on_time')">‚úÖ On Time (+20)</button>
                <button class="btn-red" onclick="showTimeout()">‚è∞ Timeout</button>
            </div>
        </div>

        <div class="note">
            <strong>üí° This is a standalone test page.</strong><br>
            It doesn't connect to the database or affect your live app. Use it to preview all the Clock Challenge UI elements!
        </div>
    </div>

    <script>
        // Timer state
        let timerInterval = null;
        let timeRemaining = 0;
        let timeAllowed = 0;

        // Show Intro Modal
        function showIntroModal() {
            const modal = document.createElement('div');
            modal.id = 'testModal';
            modal.innerHTML = `
                <div style="position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 10000; display: flex; align-items: flex-start; justify-content: center; padding: 20px; overflow-y: auto; -webkit-overflow-scrolling: touch;">
                    <div style="background: linear-gradient(135deg, #1e1b4b, #312e81); border-radius: 20px; padding: 25px; max-width: 480px; width: 100%; color: white; text-align: center; box-shadow: 0 25px 50px rgba(0,0,0,0.5); animation: clockModalPop 0.4s ease-out; margin: auto 0;">
                        <div style="font-size: 4rem; margin-bottom: 15px; animation: clockPulse 1.5s ease-in-out infinite;">‚è±Ô∏è</div>
                        <h2 style="font-size: 1.8rem; margin-bottom: 10px; background: linear-gradient(90deg, #fbbf24, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 800;">CLOCK CHALLENGE UNLOCKED!</h2>
                        <p style="color: #c7d2fe; margin-bottom: 20px; font-size: 1.1rem;">Congratulations on reaching Level 6!</p>
                        <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 20px; margin-bottom: 20px; text-align: left;">
                            <h3 style="color: #fbbf24; font-size: 1rem; margin-bottom: 12px; text-align: center;">HOW IT WORKS</h3>
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 10px;"><span style="font-size: 1.5rem;">‚è±Ô∏è</span><span style="color: #e0e7ff;">Complete the level before time runs out</span></div>
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 10px;"><span style="font-size: 1.5rem;">‚úÖ</span><span style="color: #e0e7ff;">Correct answers earn points as normal</span></div>
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 10px;"><span style="font-size: 1.5rem;">‚ùå</span><span style="color: #e0e7ff;">Wrong answers cost you time!</span></div>
                            <div style="display: flex; align-items: center; gap: 12px;"><span style="font-size: 1.5rem;">üèÜ</span><span style="color: #e0e7ff;">Finish on time = <strong style="color: #fbbf24;">BONUS POINTS!</strong></span></div>
                        </div>
                        <div style="background: rgba(0,0,0,0.2); border-radius: 10px; padding: 15px; margin-bottom: 25px; font-size: 0.9rem; color: #a5b4fc;">
                            <strong>If time runs out:</strong><br>You keep all points earned and continue in normal mode.<br>Clock mode unlocks again after you complete the level!
                        </div>
                        <button onclick="closeModal()" style="padding: 15px 40px; background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #1e1b4b; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer;">üëç Got it!</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Show Opt-In Modal
        function showOptInModal(level) {
            const config = { 6: {time: '2:00', penalty: 10}, 7: {time: '2:30', penalty: 10}, 8: {time: '3:00', penalty: 15}, 9: {time: '3:30', penalty: 15}, 10: {time: '4:00', penalty: 20} };
            const c = config[level] || config[6];
            
            const modal = document.createElement('div');
            modal.id = 'testModal';
            modal.innerHTML = `
                <div style="position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 10000; display: flex; align-items: flex-start; justify-content: center; padding: 20px; overflow-y: auto; -webkit-overflow-scrolling: touch;">
                    <div style="background: linear-gradient(135deg, #1e1b4b, #312e81); border-radius: 20px; padding: 25px; max-width: 420px; width: 100%; color: white; text-align: center; box-shadow: 0 25px 50px rgba(0,0,0,0.5); animation: clockModalPop 0.3s ease-out; margin: auto 0;">
                        <div style="font-size: 3rem; margin-bottom: 10px; animation: clockPulse 1s ease-in-out infinite;">‚è±Ô∏è</div>
                        <h2 style="font-size: 1.5rem; margin-bottom: 5px; color: #fbbf24; font-weight: 700;">CLOCK CHALLENGE</h2>
                        <div style="color: #a5b4fc; font-size: 1.2rem; margin-bottom: 20px;">Level ${level}</div>
                        <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 15px; margin-bottom: 20px;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; text-align: center;">
                                <div><div style="font-size: 1.5rem;">‚è±Ô∏è</div><div style="color: #fbbf24; font-weight: 600;">${c.time}</div><div style="color: #a5b4fc; font-size: 0.75rem;">Time</div></div>
                                <div><div style="font-size: 1.5rem;">‚ùå</div><div style="color: #f87171; font-weight: 600;">-${c.penalty}s</div><div style="color: #a5b4fc; font-size: 0.75rem;">Wrong Penalty</div></div>
                                <div><div style="font-size: 1.5rem;">üèÜ</div><div style="color: #4ade80; font-weight: 600;">Up to +50</div><div style="color: #a5b4fc; font-size: 0.75rem;">Bonus Points</div></div>
                            </div>
                        </div>
                        <div style="color: #818cf8; font-size: 0.85rem; margin-bottom: 20px;">üåü First attempt!</div>
                        <p style="color: #c7d2fe; margin-bottom: 25px; font-size: 1rem;">Ready to race the clock?</p>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <button onclick="closeModal(); startTimer(${parseInt(c.time)*60 + (c.time.includes(':') ? parseInt(c.time.split(':')[1]) : 0)});" style="padding: 15px 30px; background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #1e1b4b; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer;">‚è±Ô∏è Start Clock Challenge</button>
                            <button onclick="closeModal()" style="padding: 12px 25px; background: rgba(255,255,255,0.1); color: #a5b4fc; border: 2px solid rgba(255,255,255,0.2); border-radius: 10px; font-size: 1rem; cursor: pointer;">üìö Normal Mode</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Show Success Modal
        function showSuccess(tier) {
            const tiers = {
                lightning: { points: 50, emoji: '‚ö°', name: 'Lightning Fast', bg: 'linear-gradient(135deg, #fbbf24, #f59e0b)', text: '#1e1b4b', time: '1:23' },
                fast: { points: 35, emoji: 'üî•', name: 'Speed Demon', bg: 'linear-gradient(135deg, #f97316, #ea580c)', text: 'white', time: '0:42' },
                on_time: { points: 20, emoji: '‚úÖ', name: 'Beat the Clock', bg: 'linear-gradient(135deg, #22c55e, #16a34a)', text: 'white', time: '0:15' }
            };
            const t = tiers[tier];
            
            const modal = document.createElement('div');
            modal.id = 'testModal';
            modal.innerHTML = `
                <div style="position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 10000; display: flex; align-items: flex-start; justify-content: center; padding: 20px; overflow-y: auto; -webkit-overflow-scrolling: touch;">
                    <div style="background: ${t.bg}; border-radius: 20px; padding: 25px; max-width: 420px; width: 100%; color: ${t.text}; text-align: center; box-shadow: 0 25px 50px rgba(0,0,0,0.5); animation: clockSuccessPop 0.5s ease-out; margin: auto 0;">
                        <div style="font-size: 5rem; margin-bottom: 10px; animation: clockBounce 0.6s ease-out;">${t.emoji}</div>
                        <h2 style="font-size: 2rem; margin-bottom: 5px; font-weight: 800;">${t.name.toUpperCase()}!</h2>
                        <p style="font-size: 1.2rem; margin-bottom: 20px; opacity: 0.9;">You beat the clock!</p>
                        <div style="background: rgba(0,0,0,0.15); border-radius: 15px; padding: 20px; margin-bottom: 20px;">
                            <div style="font-size: 3rem; font-weight: 800; margin-bottom: 5px;">+${t.points}</div>
                            <div style="font-size: 1rem; opacity: 0.9;">BONUS POINTS!</div>
                        </div>
                        <div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 25px; font-size: 0.95rem;">
                            <div><div style="font-weight: 600;">‚è±Ô∏è ${t.time}</div><div style="opacity: 0.8; font-size: 0.85rem;">Time Left</div></div>
                            <div><div style="font-weight: 600;">‚úÖ 5/6</div><div style="opacity: 0.8; font-size: 0.85rem;">Correct</div></div>
                        </div>
                        <button onclick="closeModal()" style="padding: 15px 35px; background: rgba(0,0,0,0.2); color: inherit; border: 2px solid rgba(0,0,0,0.1); border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer;">Awesome! Continue ‚Üí</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Show Timeout Modal
        function showTimeout() {
            const modal = document.createElement('div');
            modal.id = 'testModal';
            modal.innerHTML = `
                <div style="position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 10000; display: flex; align-items: flex-start; justify-content: center; padding: 20px; overflow-y: auto; -webkit-overflow-scrolling: touch;">
                    <div style="background: linear-gradient(135deg, #7f1d1d, #991b1b); border-radius: 20px; padding: 25px; max-width: 400px; width: 100%; color: white; text-align: center; box-shadow: 0 25px 50px rgba(0,0,0,0.5); animation: clockModalPop 0.3s ease-out; margin: auto 0;">
                        <div style="font-size: 4rem; margin-bottom: 15px;">‚è∞</div>
                        <h2 style="font-size: 1.8rem; margin-bottom: 15px; font-weight: 700;">TIME'S UP!</h2>
                        <p style="color: #fecaca; font-size: 1.1rem; margin-bottom: 10px;">You answered <strong>3</strong> of <strong>5</strong> correctly</p>
                        <div style="background: rgba(0,0,0,0.2); border-radius: 10px; padding: 15px; margin: 20px 0; color: #fca5a5; font-size: 0.95rem;">
                            <p>üí∞ You keep all points earned!</p>
                            <p style="margin-top: 8px;">Complete this level normally to unlock Clock Challenge again.</p>
                        </div>
                        <button onclick="closeModal()" style="padding: 15px 35px; background: white; color: #991b1b; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer;">Continue in Normal Mode</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Timer Functions
        function startTimer(seconds) {
            stopTimer();
            timeAllowed = seconds;
            timeRemaining = seconds;
            document.getElementById('timerDemo').style.display = 'block';
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                if (timeRemaining > 0) {
                    timeRemaining--;
                    updateTimerDisplay();
                    if (timeRemaining <= 0) {
                        stopTimer();
                        showTimeout();
                    }
                }
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            document.getElementById('timerDemo').style.display = 'none';
        }

        function applyPenalty() {
            if (timeRemaining > 0) {
                timeRemaining = Math.max(0, timeRemaining - 15);
                updateTimerDisplay();
                
                // Flash red
                const demo = document.getElementById('timerDemo');
                demo.style.background = 'linear-gradient(135deg, #7f1d1d, #991b1b)';
                setTimeout(() => {
                    demo.style.background = 'linear-gradient(135deg, #1e1b4b, #312e81)';
                }, 300);
                
                // Show penalty toast
                const toast = document.createElement('div');
                toast.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: linear-gradient(135deg, #dc2626, #b91c1c); color: white; padding: 15px 30px; border-radius: 12px; font-size: 1.3rem; font-weight: 700; z-index: 10001; animation: penaltyPop 0.6s ease-out forwards;';
                toast.textContent = '-15 seconds!';
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), 600);
                
                if (timeRemaining <= 0) {
                    stopTimer();
                    showTimeout();
                }
            }
        }

        function updateTimerDisplay() {
            const mins = Math.floor(timeRemaining / 60);
            const secs = timeRemaining % 60;
            const percent = (timeRemaining / timeAllowed) * 100;
            
            document.getElementById('timerDisplay').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
            document.getElementById('timerBar').style.width = `${percent}%`;
            
            const bar = document.getElementById('timerBar');
            const emoji = document.getElementById('timerEmoji');
            const demo = document.getElementById('timerDemo');
            
            if (percent > 50) {
                bar.style.background = 'linear-gradient(90deg, #22c55e, #4ade80)';
                emoji.textContent = '‚è±Ô∏è';
                emoji.style.animation = '';
                demo.style.animation = '';
            } else if (percent > 20) {
                bar.style.background = 'linear-gradient(90deg, #eab308, #fbbf24)';
                emoji.textContent = '‚è±Ô∏è';
            } else if (percent > 10) {
                bar.style.background = 'linear-gradient(90deg, #f97316, #fb923c)';
                emoji.textContent = '‚ö†Ô∏è';
            } else {
                bar.style.background = 'linear-gradient(90deg, #ef4444, #f87171)';
                emoji.textContent = 'üö®';
                emoji.style.animation = 'clockPulse 0.5s ease-in-out infinite';
                if (timeRemaining <= 10) {
                    demo.style.animation = 'clockFlash 0.5s ease-in-out infinite';
                }
            }
        }

        function closeModal() {
            const modal = document.getElementById('testModal');
            if (modal) modal.remove();
        }
    </script>
</body>
</html>
